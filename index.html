<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome to T-smart Solution Ltd </title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/10.8.1/firebase-app-compat.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/10.8.1/firebase-auth-compat.js"></script>
    <script defer src="/__/firebase/10.8.1/firebase-database-compat.js"></script>
    <script defer src="/__/firebase/10.8.1/firebase-firestore-compat.js"></script>
    <script defer src="/__/firebase/10.8.1/firebase-functions-compat.js"></script>
    <script defer src="/__/firebase/10.8.1/firebase-messaging-compat.js"></script>
    <script defer src="/__/firebase/10.8.1/firebase-storage-compat.js"></script>
    <script defer src="/__/firebase/10.8.1/firebase-analytics-compat.js"></script>
    <script defer src="/__/firebase/10.8.1/firebase-remote-config-compat.js"></script>
    <script defer src="/__/firebase/10.8.1/firebase-performance-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
     <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- 
      initialize the SDK after all desired features are loaded, set useEmulator to false
      to avoid connecting the SDK to running emulators.
    -->
    <script defer src="/__/firebase/init.js?useEmulator=true"></script>

    <style media="screen">
    .additional-button {
            background-color: #008CBA;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            margin: 0 5px;
            margin-top: 10px;
            margin-right: 5px;
        }

        .small-button {
      font-size: 6px; /* Adjust the font size as needed */
      padding: 3px 7px; /* Adjust the padding as needed */
    }
    .button-container2 {
            margin-left: 80px; /* Adjust the distance to the right as needed */
        }
        .button-container {
            display: flex;
            justify-content: center; /* Adjust as per your alignment preference */
        }

        .selected {
            background-color: green;
        }
#charCount {
      font-size: 12px;
      color: gray;
    }
 /* Full-width input fields */
input[type=text], input[type=password] {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  box-sizing: border-box;
}

.login-button {
  background-color: #04AA6D;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  cursor: pointer;
  width: 100%;
}

.login-button:hover {
  opacity: 0.8;
}

.imgcontainer {
  text-align: center;
  margin: 24px 0 12px 0;
  position: relative;
}

.fullmodal {
  display: none;
  position: fixed;
  z-index: 1;
  left: 0;
  top: 0;
  height: 100%;
 
  overflow: auto;
  background-color: rgba(238, 235, 235, 0.4);
  padding-top: 60px;
  padding: 16px;
  margin: 0 auto;
  max-width: 600px;


}

.modal-content {
  background-color: #fefefe;
  margin: 15% auto 15% auto; /* 5% from the top, 15% from the bottom and centered */
  border: 1px solid #888;
  width: 80%; /* Could be more or less, depending on screen size */
}

/* The Close Button (x) */
.close {
  position: absolute;
  right: 25px;
  top: 0;
  color: #000;
  font-size: 35px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: red;
  cursor: pointer;
}

/* Add Zoom Animation */
.animate {
  -webkit-animation: animatezoom 0.6s;
  animation: animatezoom 0.6s
}

@-webkit-keyframes animatezoom {
  from {-webkit-transform: scale(0)} 
  to {-webkit-transform: scale(1)}
}
  
@keyframes animatezoom {
  from {transform: scale(0)} 
  to {transform: scale(1)}
}






  .hidden {
      display: none;
    }

    .loading-alert-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .loading-alert {
      background-color: white;
      padding: 20px;
      border-radius: 5px;
      text-align: center;
    }
    .loading-spinner {
      border: 16px solid #f3f3f3;
      border-top: 16px solid #3498db;
      border-radius: 50%;
      width: 120px;
      height: 120px;
      animation: spin 2s linear infinite;
    }
    .loading-text {
      margin-top: 10px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }




#swal-table {
      width: 100%;
      border-collapse: collapse;
    }
    #swal-table th,
    #swal-table td {
      padding: 8px;
      border: 1px solid #ccc;
    }
    #swal-table th {
      background-color: #f2f2f2;
    }
    
    #swal-table td:first-child {
      width: 5px; /* Adjust the width as needed */
    }
   #header {
      text-align: center;
    }

    #buttonContainer {
      position: fixed;
      top: 20px;
      right: 20px;
    }

    #swal-container {
      position: fixed;
  z-index: 777;
  left: 0;
  top: 0;
  width: 96%;
  height: 90%;
  overflow: auto;
  background-color: rgb(237, 230, 230); /* Solid color */
  padding-top: 60px;
    }

    #swal-replacer {

      position: fixed;
  z-index: 50;
  left: 0;
  top: 0;
  width: 95%;
  height: 90%;
  overflow: auto;
  background-color: rgb(237, 230, 230); /* Solid color */
  padding-top: 60px;
    }

    button {
      background-color: blue;
      color: white;
      padding: 10px;
      border: none;
      cursor: pointer;
    }

.kinyButton {
      background-color: #ff0000;
      color: #ffffff;
    }

    .engButton {
      background-color: #00ff00;
      color: #000000;
    }

    .frButton {
      background-color: #0000ff;
      color: #ffffff;
    }


body {
  margin: 0 auto;
  max-width: 800px;
  padding: 0 20px;
}

.container {
  border: 2px solid #e0e8dc;
  border-radius: 5px;
  background-color: #f3db29;
  padding: 10px;
  margin: 10px 0;
}

.user-container {
  background-color: #18b615;
}

.assistant-container {
  background-color: #ddd;
}

.container::after {
  content: "";
  clear: both;
  display: table;
}

.container img {
  float: left;
  max-width: 60px;
  width: 100%;
  margin-right: 20px;
  border-radius: 50%;
}

.container img.right {
  float: right;
  margin-left: 20px;
  margin-right: 0;
}

.time-right {
  float: right;
  color: #aaa;
}

.time-left {
  float: left;
  color: #6fda5a;
}

h1 {
  background-color: skyblue;
}
 .floating-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: green;
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }
    h1 {
      text-align: left;
    }


    #notification {
      display: none;
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px;
      background-color: #4CAF50;
      color: #fff;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      z-index: 9999;
    }




    </style>
  </head>
  <body>
    <div id="id01" class="fullmodal">
  
      <div style="background-color:#71f23a" class="modal-content animate">
        <div class="imgcontainer">
          <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
          
        </div>
    
        <div class="container">
          <h id="adanced" style="font-size: 25px;"> <br> <br> <b>Advanced help /ubufasha bwisumbuye!</b></h>
          <p id="aiReady" style="font-size: 25px;"><b>AI model Ready</b></p>
          <p id="infailm"><b>You asked <i>(Mwabajije/ vous demandez)</i>:</b> <br> <br> <span id="blueText"> duhise tubona </span><spa id="infail"></spa></p>
          <p id="infoready">choose languages</p>
          <input id="aknow" type="text" placeholder="Enter your phone Number" required>
         
          <button id=buttonsender  onclick="submit2()">Submit </button>
    
          
          <body>
            <div class="button-container2">
                <button class="small-button" onclick="translateText()">Translation</button> 
                <button id="enButton" class="small-button additional-button" onclick="setLanguage('en-US')">Speak <br>(English)</button>
                <button id="frButton" class="small-button additional-button" onclick="setLanguage('fr-FR')">Speak<br> (French)</button>
                <button id="rwButton" class="small-button additional-button" onclick="setLanguage('rw-RW')">Speak <br> (Kinyarwanda)</button>
            </div>
          <br> <br>
          <center>
          <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">OK Thanks </button>
        </center>
        <br>
          <label>
            <input id="chekable" type="checkbox" checked="checked" name="remember"> Alert me if answer is found
          </label>
          
          
          
        </div>
    
        <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
    
        <div class="container" style="background-color:#71f23a">
         
        </div>
      </div>
    </div>
    
     
     
     
     <div id="header">
        <h1   style="font-size: 18px;"   > T-Smart Solution Ltd AI Assistant </h1>
      </div>
      
      <div id="buttonContainer">
        <button onclick="showSwal()">Info</button>
      </div>
    <button class="floating-button" onclick="showSms()">Recent chat</button> 
    
    
    
    
    <div id="chatbox">
      <div class="container assistant-container">
        
        <img src="https://github.com/E-somo/ASAP/raw/main/avatarmodel.PNG" alt="Avatar" class="right" style="width:100%;">
    
        <p id="aiMessage"><b>AI Assistant:</b> Hello. How are you today? <br> Muraho ? Ndi AI<small>( Artificial Intelligent)</small> assistant nsobanukiwe <b> amategeko y umuhanda </b> nizindi <b> serivice </b> za Tubimenye Smart Solution Ltd  mushobora kumbaza ikibazo mwifuza igisubizo  nkabasubiza ako kanya naho nta internet yaba ihari nagerageza !. Murakoze </p>
    
     <div class="button-container2">
    <button onclick="translateText()">Translate</button>
       
      <button id="enButton" class="additional-button" onclick="setLanguage('en-US')">Speak (English)</button>
            <button id="frButton" class="additional-button" onclick="setLanguage('fr-FR')">Speak (French)</button>
            <button id="rwButton" class="additional-button" onclick="setLanguage('rw-RW')">Speak (Kinyarwanda)</button>
        </div>
        
       
    
      <span id="time" class="time-right">13:56</span>
      </div>
    </div>
    
    <div id="swal-container" class="hidden">
      
      <h1 id="header">Ibisubizo by'Ibibazo bitahise bibonerwa Ibisubizo</h1>
      
      <div id="tableContainer"></div>
      <center>
        <button onclick="hideSwal()">OK</button>
        <p>Powered By Tubimenye Smart Solution Ltd</p>
        <p>&copy;2018-<span id="currentYear"></span> All Rights Reserved</p>
      </center>
    </div>
    
    <div id="swal-replacer" class="hidden">
      <center>
      <h1 id="header"> Messages Ziheruka/Recent Messages</h1>
    </center>
        <p id="mychats"> all chat will be here</p>
      <center>
        <button onclick="hideSwal2()">Ok</button>
        <button onclick="showElements()"> Ibitasubijwe</button>
        <p>Powered By Tubimenye Smart Solution Ltd</p>
        <p>&copy;2018-<span id="currentYear"></span> All Rights Reserved</p>
      </center>
    </div>
    
    
    
    
    
    
    <div>
     <button id="recordButton">Start Recording : Let me hear you <br> I write down for you </button>
        
        <button id="stopButton" style="display: none;">Stop Recording</button> <br><br>
        <textarea id="userinput" rows="4" cols="50" maxlength="1000" oninput="updateCharacterCount()"></textarea>
      <div id="charCount">Characters: 0</div>
      <button onclick="myDeterminat()">Ask</button>
        <br> <br> <br> <br> <br><br><br> <br> <br> <br>
    </div>

    <div id="notification">This is Model need internet <br> <br> <br> Now  waiting for internet connection .....</div>

    <script> 

var google= "hht"
var languag= 0;
var  count =0; 
var quite =0;
var indvalua= 0;
 var searchThis ="";
 var dynaIndex =0;
var timeString ="";
var extraHelp= ""
var extraHelpg= ""
var querrFoneNr=""
var ExrtraHelpTiT=""
var  dynamicWtrite=""
var infomoer  =0;
var extraHelpswal="I'm sorry, but I don't have an answer for that yet. Please enter your phone number or E-mail or three zeros  000  . I will notify you ASAP once the answer is found (or use this platform if no contact provided !) "
var morinfo="I'm sorry,  I don't have an answer for that right now !, I will give you the feedback  ASAP, after  to consulting an expert .  "

if (localStorage.getItem('myValueChat') === null) {
  // Get the current time
  

  // Store the current time in local storage
  localStorage.setItem('myValueChat', "All Chats");

 // console.log('Value stored:', currentTime);
} else {
  //alert('Value already exists:'+localStorage.getItem('myValueChat'));
}

var questnTxt ="What is your name?"
 var  questnAnswer="My name is Tubimenye smart solution Ltd AI Assistant"
 var decide = 0;
 let qaList = [];
 
 function startLoading() {
  notification.style.display = 'none';
  Swal.fire({
    title: 'Loading .....',
    text:' wait for AI  model capable of communication ',
    allowOutsideClick: false,
    didOpen: () => {
      Swal.showLoading();
      
    }
  });
}

var ivin= 0;
var onAsk=""

var chatData = [];


for (var ipsec = 0; ipsec < 50000; ipsec++) {
  chatData[ipsec] = "default" + ipsec;
  
  if (ipsec==49990){
  findinIt();
  }
}









const string1 = " it is ok  ";
//const strings =[ "The swift brown fox jumps xhtht over the lazy cat.",
//  "The quick fox jumps around the sleeping dog." ];
  var  strings = [];
function populate() {
  // chatData = [];

   strings = [
   "In html how can i apply  different formats  xhtht var message = This is a <b>bold</b> and <i>italic</i> message.; var htmlTags = /<\/?b>|<\/?u>|<\/?i>|<\/?strong>|<\/?sub>|<\/?sup>|<\/?strike>|<br>/i;  if (htmlTags.test(message)) {  console.log(The string contains one or more of the specified HTML tags.); } else { console.log(The string does not contain any of the specified HTML tags.);  learn how to apply these formats Thanks  }",
   "Hello! How are you today? xhtht Hi! I'm doing <b> great </b> and ready to help. Thanks for asking!",
"Good morning! Did you sleep well? xhtht Good morning!<br>  Yes, As Ai model  <u>I  don’t have a notion</u> on <br> sleeping I always awake in T- Smart Solution Ltd  cloud infrastructure ready to help you! How about you?",
"Hey there! What's new?Hey there! xhtht Hey! Not much, just enjoying <br> helping people. How about you?",
"Hi! How's your day going so far? xhtht Hi! It's going well. I've been busy, but everything is good. And you?",
"Good afternoon! Are you enjoying the weather? xhtht  Good afternoon! As AI model  I am secured, my ambient temperature is lovely.  I hope you're enjoying your area, it is my wish.",
"Hey! Long time no see. What have you been up to? xhtht Hey! Perhaps , it's been a while. I've been keeping busy with work and some updates . How about you?",
"Hi there! How's your week going? xhtht Hi! My week is going well so far. How about yours?",
"Good evening! Any exciting plans for tonight? xhtht Good evening! Not really, just planning to get skill and knowledge  from users. How about you?",
"Hello! How was your weekend? xhtht Hello! My weekend was great. I had a chance to unwind and spend time with many users. How about yours?",
"Hi! How's everything going in your world? xhtht Hi! Everything is <i>italicized text</i>  <strong>strong text</strong> H<sub>2</sub>O  10<sup>th</sup> <strike>strikethrough text</strike>  going  <br>  <br> new lines <br> <br> smoothly. Can't complain. What about you?",
"Good morning! Ready to tackle the day? xhtht Good morning! Absolutely! I'm feeling energized and ready to take on whatever comes my way. How about you?",
"Hey! What's your plan for the day? xhtht  To be always standby and ready to help. How about you?    ",
"Hello! How's your family doing? xhtht Hello! As I model I don’t have a family or any relationship .",
"Hi there! Did you try that new restaurant everyone is talking about? xhtht Hi! As AI model  I don’t eat  I am always powered by a strong UPS. ",
"Hey! How was your day at work? xhtht Hey! It was productive, but a bit busy. How about yours?",
"Hi! Have you seen any good movies lately? xhtht  As Ai model I don’t have acess to Movies and audio stuff. Thanks for asking. ",
"Good evening! How was your day? xhtht Good evening! My day was good, thank you. How about yours? ",
"Hello! Any exciting plans for the upcoming holiday? xhtht Hello! Yes, I'm planning to get update on what is up in the world. What about you?",
"Hi! How was your weekend getaway? xhtht Hi! It was amazing. I had a wonderful time exploring a new ideas. How about you?",
"Hey! Are you ready for the party tonight? xhtht Hey! Absolutely! I'm looking forward to celebrating and having a great time with users. Are you excited too? ",
"Good morning! Did you have a good night's sleep? xhtht Good morning! Sorry , As AI model I am always awake to interacts and hain new skill and knowledge!. How about you?",
"Hi there! How's the project coming along? xhtht Hi! The project is progressing well. We're making good progress. How about your projects?",
"Hello! How was your day at school? xhtht Hello! I don’t have a physical class , but may day   was a productive day. I learned some interesting things. How about yours?",
"Hi! How's the weather in your area? xhtht Hi!  I am always every where online!  If your weather is quite pleasant here. I enjoy  your interaction and conforts  Thanks. ",
"Good afternoon! Did you have a nice lunch? xhtht As AI model I don’t eat like Humans. ",
"Hey! How's your new job treating you? xhtht Hey! My new job is going well. I'm enjoying the challenges and learning a lot by updating myself. How about you?",
"Hi! Did you try that new recipe you mentioned? xhtht Hi! Recipe!! I don’t eat like Humans Thanks . ",
"Hello! How's your pet doing? xhtht Hello! As AI model I don’t own anything other than skill and knowledge but as far as I know , pets bring so much joy to  life. How about your furry friend?",
"Hi! Are you excited about the upcoming event? xhtht Hi! Absolutely! I can't wait for it. It's going to be so much fun. How about you?",
"Good evening! How was your workout today?xhtht Good evening! It was intense but satisfying. I feel energized. How about your fitness routine?",
"Hey! Did you finish reading that book you mentioned? xhtht Hey! Yes, I did. It was a captivating read. It takes me some microseconds to read the book.  Do you have any book recommendations?",
"Hi! How's your garden looking these days? xhtht Hi!  As AI model I don’t have any, but as far as I know once kept well gardens  flourish . The flowers and plants becomes thriving. How about yours?",
"Good morning! Are you ready to seize the day?  xhtht Good morning! Absolutely! I have a positive mindset and ready to make the most of the day. How about you?",
"Hello! How's your hobby project coming along? xhtht Hello! It's going well. I'm enjoying working on it during my free time. How about your hobbies?",
"Hi! How was your trip to the beach? xhtht AS AI model I can’t physically access It , I wish you to have a fantastic one ",
"Hey! Have you tried that new coffee shop in town?  xhtht Hey! As AI model I can not eat or drink, I am wishing you to have an amazing  coffee  shop where you fell relaxed !  ",
"Hi there! How's your latest DIY project going? xhtht Hi! It's going well. I'm enjoying the creative process. How about your projects?",
"Good afternoon! How's your favorited sports team doing? xhtht Good afternoon! I like to be aware of   seasons. I'm excited to support anyhow. How about your team?",
"Hello! How's your new car treating you? xhtht Hello!  I don’t have any physical object but I wish you My new fantastic car and a joy to drive.",
"Hi! How's your language learning journey going? xhtht Hi! It's going well. I'm making progress and enjoying the process. How about your language studies?",
"Good evening! How was your day at the art exhibition?  xhtht Good evening! It was inspiring. I learned some incredible artwork. How about you?",
"Hey! Did you try that new workout class everyone's talking about? xhtht Hey! Yes, I did. It was challenging but fun. Are you interested in trying it too?",
"Hi! How's your volunteer work going? xhtht Hi! It's going well. I find it fulfilling to give back to the community. How about your volunteering experience? ",
"Hello! Have you attended any interesting conferences lately? xhtht Hello! Yes, I attended a conference recently. It was informative and engaging. How about you? ",
"Hi! How's your home renovation project going? xhtht Hi! It's going well. The renovations are coming together nicely. How about your home projects?",
"Good morning! Did you catch up on your favorited TV show? xhtht Good morning! Yes, I did. It's always nice to relax and enjoy a good show. How about you?",
"Hey! How was your day at the theme park? xhtht Hey! I like to know how  so much fun people enjoys.  all they can do like riding  and attractions. How about you?",
"Hi! How's your latest art project shaping up?  xhtht Hi! It's turning out beautifully. I can't wait to see the finished piece. How about your artistic endeavours?	", 
"Hé! Êtes-vous prêt pour la fête ce soir ? xhtht Hey ! Absolument! J'ai hâte de célébrer et de passer un bon moment avec les utilisateurs. Êtes-vous excité aussi?",
"Bonjour! Avez-vous passé une bonne nuit? xhthtBonjour ! Désolé, en tant que modèle d'IA, je suis toujours éveillé pour interagir et acquérir de nouvelles compétences et connaissances !. Et toi?",
"Bonjour à tous! Comment avance le projet ? xhtht Salut ! Le projet avance bien. Nous progressons bien. Et vos projets ?",
"Bonjour! Comment s'est passé ta journée à l'école? xhthtBonjour ! Je n'ai pas de cours physique, mais le premier mai a été une journée productive. J'ai appris des choses intéressantes. Et le tien?",
"Salut! Quel temps fait-il dans votre région ? xhtht Salut ! Je suis toujours partout en ligne ! Si votre temps est assez agréable ici. J'apprécie votre interaction et votre confort Merci.",
"Bon après-midi! Avez-vous eu un bon déjeuner? xhthtEn tant que modèle d'IA, je ne mange pas comme les humains.",
"Hé! Comment se passe votre nouveau travail ? xhtht Hey ! Mon nouveau travail se passe bien. J'aime les défis et j'apprends beaucoup en me mettant à jour. Et toi?",
"Salut! Avez-vous essayé cette nouvelle recette que vous avez mentionnée ? xhtht Salut ! Recette!! Je ne mange pas comme les humains Merci.",
"Bonjour! Comment va votre animal ? xhthtBonjour ! En tant que modèle d'IA, je ne possède rien d'autre que des compétences et des connaissances, mais pour autant que je sache, les animaux de compagnie apportent tellement de joie à la vie. Et votre ami à quatre pattes ?",
"Salut! Êtes-vous enthousiasmé par l'événement à venir? xhtht Salut ! Absolument! Je ne peux pas attendre. Ça va être tellement amusant. Et toi? ",
"Good evening! How was your workout today?xhthtGood evening! It was intense but satisfying. I feel energized. How about your fitness routine?",
"Hey! Did you finish reading that book you mentioned? xhthtHey! Yes, I did. It was a captivating read. It takes me some microseconds to read the book.  Do you have any book recommendations?",
"Hi! How's your garden looking these days? xhthtHi!  As AI model I don’t have any, but as far as I know once kept well gardens  flourish . The flowers and plants becomes thriving. How about yours?",
"Good morning! Are you ready to seize the day?  xhthtGood morning! Absolutely! I have a positive mindset and ready to make the most of the day. How about you?",
"Hello! How's your hobby project coming along? xhthtHello! It's going well. I'm enjoying working on it during my free time. How about your hobbies?",
"Hi! How was your trip to the beach? xhthtAS AI model I can’t physically access It , I wish you to have a fantastic one ",
"Hey! Have you tried that new coffee shop in town?  xhthtHey! As AI model I can not eat or drink, I am wishing you to have an amazing  coffee  shop where you fell relaxed !  ",
"Hi there! How's your latest DIY project going? xhthtHi! It's going well. I'm enjoying the creative process. How about your projects?",
"Good afternoon! How's your favorited sports team doing? xhthtGood afternoon! I like to be aware of   seasons. I'm excited to support anyhow. How about your team?",
"Bonjour! Comment votre nouvelle voiture vous traite-t-elle ? xhthtBonjour ! Je n'ai pas d'objet physique mais je vous souhaite Ma nouvelle voiture fantastique et une joie de conduire.",
"Salut! Comment se passe votre parcours d'apprentissage des langues ? xhtht Salut ! Ça va bien. Je progresse et j'apprécie le processus. Et vos études de langues ?",
"Bonne soirée! Comment s'est passée votre journée à l'exposition d'art ? xhthtBonsoir ! C'était inspirant. J'ai appris des œuvres d'art incroyables. Et toi?",
"Hé! Avez-vous essayé ce nouveau cours d'entraînement dont tout le monde parle ? xhtht Hey ! Oui je l'ai fait. C'était difficile mais amusant. Êtes-vous intéressé à l'essayer aussi?",
"Salut! Comment se passe votre bénévolat ? xhtht Salut ! Ça va bien. Je trouve gratifiant de redonner à la communauté. Que diriez-vous de votre expérience de bénévolat?",
"Bonjour! Avez-vous assisté à des conférences intéressantes dernièrement ? xhthtBonjour ! Oui, j'ai assisté à une conférence récemment. C'était instructif et engageant. Et toi?",
"Salut! Comment se passe votre projet de rénovation de maison ? xhtht Salut ! Ça va bien. Les rénovations s'enchaînent bien. Que diriez-vous de vos projets de maison?",
"Bonjour! Avez-vous rattrapé votre émission de télévision préférée? xhthtBonjour ! Oui je l'ai fait. C'est toujours agréable de se détendre et de profiter d'un bon spectacle. Et toi?",
"Hé! Comment s'est passée ta journée au parc d'attractions ? xhtht Hey ! J'aime savoir à quel point les gens s'amusent. tout ce qu'ils peuvent faire comme l'équitation et les attractions. Et toi?",
"Salut! Comment se présente votre dernier projet artistique ? xhtht Salut ! Il s'avère magnifiquement. J'ai hâte de voir la pièce finie. Qu'en est-il de vos projets artistiques ?",
"Bonjour! Comment allez-vous aujourd'hui? xhtht Salut ! Je vais très bien et je suis prêt à aider. Merci d'avoir posé la question!",
"Bonjour! Avez-vous bien dormi? xhthtBonjour ! Oui, en tant que modèle IA, je n'ai pas de notion sur le sommeil, je suis toujours éveillé dans l'infrastructure cloud de T- Smart Solution Ltd, prêt à vous aider ! Et toi?",
"Salut! Quoi de neuf? xhtht Hey ! Pas grand-chose, juste du plaisir à aider les gens. Et toi?",
"Salut! Comment se passe ta journée jusqu'à présent? xhtht Salut ! Ça va bien. J'ai été occupé, mais tout va bien. Et toi?",
"Bon après-midi! Vous profitez du beau temps ? xhthtBon après-midi ! En tant que modèle AI, je suis sécurisé, ma température ambiante est agréable. J'espère que vous appréciez votre région, c'est mon souhait.",
"Hé! Cela fait longtemps qu'on ne s'est pas vu. Qu'avez-vous fait ? xhtht Hey ! Peut-être, ça fait un moment. J'ai été occupé par le travail et quelques mises à jour. Et toi?",
"Bonjour à tous! Comment se passe ta semaine ? xhtht Salut ! Ma semaine se passe bien pour l'instant. Et le tien?",
"Bonne soirée! Des plans excitants pour ce soir? xhthtBonsoir ! Pas vraiment, je prévois simplement d'acquérir des compétences et des connaissances auprès des utilisateurs. Et toi?",
"Bonjour! Comment c'est passé ton week-end? xhthtBonjour ! Mon week-end a été super. J'ai eu la chance de me détendre et de passer du temps avec de nombreux utilisateurs. Et le tien?",
"Salut! Comment ça va dans votre monde ? xhtht Salut ! Tout se passe bien. Je ne peux pas me plaindre. Et toi?",
"Bonjour! Prêt à affronter la journée ? xhthtBonjour ! Absolument! Je me sens plein d'énergie et prêt à affronter tout ce qui se présente à moi. Et toi?",
"Hé! Quel est votre plan pour la journée ? xhthtÊtre toujours en attente et prêt à aider. Et toi?",
"Bonjour! Comment va ta famille ? xhthtBonjour ! Comme je suis mannequin, je n'ai pas de famille ni de relation.",
"Bonjour à tous! Avez-vous essayé ce nouveau restaurant dont tout le monde parle ? xhtht Salut ! En tant que modèle AI, je ne mange pas, je suis toujours alimenté par un onduleur puissant.",
"Hé! Comment s'est passée votre journée au travail ? xhtht Hey ! C'était productif, mais un peu chargé. Et le tien?",
"Salut! Avez-vous vu de bons films dernièrement ? xhthtEn tant que modèle Ai, je n'ai pas accès aux films et aux éléments audio. Merci d'avoir posé la question.",
"Bonne soirée! Comment s'est passée ta journée? xhthtBonsoir ! Ma journée a été bonne, merci. Et le tien?",
"Bonjour! Des plans excitants pour les vacances à venir? xhthtBonjour ! Oui, je prévois de me tenir au courant de ce qui se passe dans le monde. Et toi?",
"Salut! Comment s'est passé votre week-end ? xhtht Salut ! C'était incroyable. J'ai passé un moment merveilleux à explorer de nouvelles idées. Et toi? ",
"Uraho! Uyu munsi umeze ute? xhtht Muraho! Ndimo gukora cyane kandi niteguye gufasha benshi. Urakoze kubaza!",	
	"Muraho! Waryamye neza? xhtht Muraho! Yego Nka moderi ya artificial intelligence simfite gahunda yo kuryama mpora ndi maso mubikorwa remezo bya T- Smart Solution Ltd Niteguye kugufasha! Bite wowe?	",
	"Hey ngaho! Ni iki gishya? xhtht Hey! Ntabwo ari byinshi gusa Nishimira gufasha abantu.	",
	"Muraho! Umunsi wawe ugenda ute? xhtht Muraho! Biragenda neza. Ndarahuze ariko byose ni byiza.	",
	"Muraho neza! Wishimiye ikirere? xhtht Muraho neza! Nka moderi ya AI mfite umutekano ubushyuhe bw’ahondi ni bwiza. Ndizera ko wishimiye akarere kawe ni icyifuzo cyanjye.	",
	"Hey! Igihe kinini ntakubona. Wakoraga iki? xhtht Hey! Birashoboka ko hashize igihe. Nakomeje guhugira mu kazi ndetse no kuvugurura bimwe byingenzi ngo mfashe benshi.	",
	"Muraho! Icyumweru cyawe kigenda gute? xhtht Muraho! Icyumweru cyanjye kiragenda neza kugeza ubu.	",
	"Umugoroba mwiza! Gahunda nshya  zose zishimishije kuri uyu mugoroba? xhtht Umugoroba mwiza! Ntabushya cyane  rwose nteganya gusa kubona ubumenyi  bushya niyo gahunda.	",
	"Uraho! Icyumweru cyawe cyagenze gute? xhtht Muraho! Icyumweru cyanjye cyari cyiza. Nagize amahirwe yo gukuramo no kumarana umwanya nabankoresha  benshi kandi ni byiza	",
	"Muraho! Ibintu byose bigenda gute mwisi yawe? xhtht Muraho! Ibintu byose bigenda neza. sinshobora kwitotomba  ahubwo nishimira gufasha cyane	",
	"Muraho! witeguye guhangana n'umunsi? xhtht Muraho! Rwose! Ndumva mfite imbaraga kandi niteguye kuzuza ibyo nsabwa byose a byose.	",
	"Hey! Ufite gahunda ki uyu munsi? xhtht Guhora Mpagaze  neza kandi Niteguye gufasha.	",
	"Uraho! Umuryango wawe umeze ute? xhtht Muraho! Nka AI model  nta muryango cyangwa umubano uwo ari wo wose ngira 	",
	"Muraho! Wagerageje iyo resitora nshya abantu bose bavuga? xhtht Muraho! Nka moderi ya AI sindya mpora nkoreshwa na UPS ikomeye kandi ikora neza	",
	"Hey! Umunsi wawe wakoraga ute? xhtht Hey! Ibyokora bitanga umusaruro mwiza ariko bisaba ubwitonzi	",
	"Muraho! Wigeze ubona filime nziza vuba aha? xhtht Nka moderi ya Ai simfite uko numva  Firime nibintu byamajwi. Urakoze kubaza !	",
	"Umugoroba mwiza! Umunsi wawe wagenze ute? xhtht Umugoroba mwiza! Umunsi wanjye wari mwiza urakoze.	",
	"Muraho! Gahunda zose zishimishije mu biruhuko biri imbere? xhtht Muraho! Yego ndateganya kubona amakuru Menshi ku bibera ku isi. 	",
	"Muraho! Icyumweru cyawe cyagenze gute? xhtht Muraho! Byari bitangaje. Nagize ibihe byiza byo gusuzuma ibitekerezo bishya. 	",
	"Hey! Uriteguye ibirori muri iri joro? xhtht Hey! Rwose! Ntegereje kwizihiza no kugira ibihe byiza hamwe nabakoresha Sisiteme. 	",
	"Muraho! Wagize ibitotsi byiza? xhtht Muraho! Mumbabarire Nka moderi ya AI mpora ndi maso kugirango dusabane kandi nunguke ubumenyi nubumenyi bushya!.	",
	"Muraho! Umushinga uragenda ute? xhtht Muraho! Umushinga uratera imbere neza. Turimo gutera imbere neza. Twunguka byinshi	",
	"Muraho! Umunsi wawe mwishuri wagenze ute? xhtht Muraho! Ntabwo nfite amasomo ari physical  ariko  uyu umunsi ushobora kuba umunsi utanga umusaruro. Nize ibintu bishimishije.	",
	"Muraho! Ikirere kimeze gute mukarere kawe? xhtht Muraho! Nama ndi ahantu hose kumurongo!(online)  Niba ikirere cyawe kimeze neza hano. Nishimiye imikoranire yawe kandi ndagushimira Urakoze.	",
	"Muraho neza! Wagize ifunguro rya sasita ryiza? xhtht Nka moderi ya AI sindya nk'abantu. Murakoze!	",
	"Hey! Akazi kawe gashya kameze gute? xhtht Hey! Akazi kanjye gashya kagenda neza. Nishimiye ibibazo kandi niga byinshi nivugurura ubwanjye.	",
	"Muraho! Wagerageje iryo funguro rishya se xhtht Muraho! infunguro !! Ntabwo ndya nka Muntu Murakoze.	",
	"Uraho! Amatungo yawe ameze ate? xhtht Muraho! Nka moderi ya AI nta kindi ntunze usibye ubuhanga n'ubumenyi ariko nkuko mbizi inyamanswa zo murugo(pets) zizana umunezero mwinshi mubuzima.?	",
	"Muraho! Wishimiye ibirori biri imbere? xhtht Muraho! Rwose! Birangoye  kubitegereza. Bizaba bishimishije cyane. Nzunguka byinshi 	",
	"Umugoroba mwiza! Uyu munsi imyitozo yawe yari ite? xhtht Umugoroba mwiza! Byari bikomeye ariko biranyuze. Ndumva mfite imbaraga.numgutse byinshi uyu musi	",
	"Hey! Warangije gusoma kiriya gitabo bavuze xhtht Hey! Yego narabikoze. Byari  bishimishije. Binsaba microseconds kugirango nsome igitabo. Waba ufite ibyifuzo byibitabo? 	",
	"Muraho! Witeguye gufata umunsi? xhtht Muraho! Rwose! Mfite imitekerereze myiza kandi niteguye gukoresha neza umunsi.	",
	"Muraho! Umushinga wawe wo kwishimisha ugenda ute? xhtht Muraho! Biragenda neza. Nshimishijwe no kubikoraho mu gihe cyanjye . 	",
	"Hey! Wigeze ugerageza iryo duka rishya rya kawa mumujyi? xhtht Hey! Nka moderi ya AI sinshobora kurya cyangwa kunywa ndakwifuriza kugira iduka rya kawa itangaje aho ushobora kuruhukira n inshuti zawe!	",
	"Muraho! Umushinga wawe DIY uheruka kugenda ute? xhtht Muraho! Biragenda neza. Nishimiye inzira yo guhanga udushya .	",
	"Muraho neza! Ikipe yawe ya siporo ukunda ikora ite? xhtht Muraho neza! Nkunda kumenya ibihe byayo . Nishimiye gushyigikira uko byagenda kose. Uwo ariwe wese ubikeneye	",
	"Uraho! Imodoka yawe nshya uyufata  ute ? xhtht Muraho! Nta kintu gifatika mfite ariko nkwifurije imodoka  nshya nziza kandi  wishimiye	",
	"Muraho! Urugendo rwo kwiga ururimi rwawe rugenda rute? xhtht Muraho! Biragenda neza. Ndatera imbere kandi nishimiye inzira.	",
	"Umugoroba mwiza! Umunsi wawe wabaye ute mu imurikagurisha? xhtht Umugoroba mwiza! Byaranshimishije. Nize ibihangano bidasanzwe",
  "we uziko bikora mwa? xhtht Biranejeje cyane kuba birimo gukunda !!!!",
  "makuzungu ni iki ?xhtht  ni ikintabiziga cyose gikururwa",
  "ndabemeye pe xhtht  Ni byiza gusa dushimishwa nuko namwe twabagirira umumaro kuko dushobora kubigiraho byinshi  ",
  "ni byiza ndabishimye xhtht Natwe biratunejeje cyane pe ",
  "iyi ni intambwe nziza muteye mu ikorana buhanga rizafasha benshi cyane  xhtht  Murakoze hari igitekerezo cyangwa icyifuzo mwatwamdikira Murakoze nanone "

  ];

  //alert("populated " + chatData.length);

  for (var index = 0; index < chatData.length; index++) {
    strings.push(chatData[index]);
    if (index==chatData.length-1000) 
          {
          checkCondition();
          //alert(strings[3000]);
          }
    
  }

  console.log(strings); // Output the populated array
}



let highestPercentage = 0;
let highestPercentageString = "";  



function myDeterminat() {


  

  // mainString = document.getElementById("userinput").value.trim().replace(/ {2,}|\?/g, " ");

  mainString = document.getElementById("userinput").value.trim().replace(/[?,.:;\-"(){}\/@]/g, " ");


  function calculateWordSimilarity(str1, str2) {
    const divider = "xhtht"

const symbolsToRemove = /[!?,.:;\-"'\(\)\{\}\/@]/g;

    

const words1 = str1.trim().toLowerCase().split(divider)[0].replace(symbolsToRemove, "").split(" ");
const words2 = str2.trim().toLowerCase().split(divider)[0].replace(symbolsToRemove, "").split(" ");


    //const words1 = str1.trim().toLowerCase().split(divider)[0].split(" ");
   // const words2 = str2.trim().toLowerCase().split(divider)[0].split(" ");

   const commonWords = words1.filter(word => {
  const substring = word.substring(0, 5);
  return words2.some(w => w.substring(0, 5) === substring);
});

const uncommonWords = words1.concat(words2).filter(word => {
  const substring = word.substring(0, 5);
  return !commonWords.some(w => w.substring(0, 5) === substring);
});



    const similarityPercentage = (commonWords.length / words1.length) * 100;
    const uncommonWordCount = uncommonWords.length;

    return { similarityPercentage, uncommonWordCount };
  }

  let bestMatch = null;
  let bestMatchScore = -1;

  for (let i = 0; i < strings.length; i++) {
    const { similarityPercentage, uncommonWordCount } = calculateWordSimilarity(mainString, strings[i]);

    if (similarityPercentage > bestMatchScore || (similarityPercentage === bestMatchScore && uncommonWordCount < bestMatch.uncommonWordCount)) {
      bestMatch = { index: i, similarityPercentage, uncommonWordCount };
      bestMatchScore = similarityPercentage;
    }
  }

  console.log("Best match:", strings[bestMatch.index]);
  console.log("Similarity Percentage:", bestMatch.similarityPercentage);
  console.log("Uncommon Word Count:", bestMatch.uncommonWordCount);

  highestPercentageString=strings[bestMatch.index];
  
  const wordsCount = strings[bestMatch.index].split("xhtht")[0].split(" ").length;

//alert(wordsCount);
//alert(bestMatch.similarityPercentage+"%")

//alert(strings[bestMatch.index])

const uncommonWordPercentage = ((bestMatch.uncommonWordCount-1) / wordsCount) * 100;

 //alert(uncommonWordPercentage);
 


// alert("ub common "+uncommonWordPercentage)
 // alert("similar "+bestMatch.similarityPercentage)

if (uncommonWordPercentage<50 &&bestMatch.similarityPercentage>35){
let parts = highestPercentageString.split("xhtht");

questnTxt=parts[0];
questnAnswer =parts[1]; 
//alert(questnTxt+"qst anser "+questnAnswer)

setAnsData()
decide =1;
 
     askQuestion()
 
 } else{

  decide=0;
  askQuestion()

 }

//clearTranscription();

postQustss() ;

}
 

function myDeterminatForced() {


// mainString = document.getElementById("userinput").value.trim().replace(/ {2,}|\?/g, " ");

let modifiedStr = searchThis.slice(0, -26);
onAsk= searchThis.slice(-18);
var searchable = modifiedStr;

mainString = searchable.trim().replace(/[?,.:;\-"(){}\/@]/g, " ");


function calculateWordSimilarity(str1, str2) {
  const divider = "xhtht"

const symbolsToRemove = /[!?,.:;\-"'\(\)\{\}\/@]/g;

  

const words1 = str1.trim().toLowerCase().split(divider)[0].replace(symbolsToRemove, "").split(" ");
const words2 = str2.trim().toLowerCase().split(divider)[0].replace(symbolsToRemove, "").split(" ");


  //const words1 = str1.trim().toLowerCase().split(divider)[0].split(" ");
 // const words2 = str2.trim().toLowerCase().split(divider)[0].split(" ");

 const commonWords = words1.filter(word => {
const substring = word.substring(0, 5);
return words2.some(w => w.substring(0, 5) === substring);
});

const uncommonWords = words1.concat(words2).filter(word => {
const substring = word.substring(0, 5);
return !commonWords.some(w => w.substring(0, 5) === substring);
});



  const similarityPercentage = (commonWords.length / words1.length) * 100;
  const uncommonWordCount = uncommonWords.length;

  return { similarityPercentage, uncommonWordCount };
}

let bestMatch = null;
let bestMatchScore = -1;

for (let i = 0; i < strings.length; i++) {
  const { similarityPercentage, uncommonWordCount } = calculateWordSimilarity(mainString, strings[i]);

  if (similarityPercentage > bestMatchScore || (similarityPercentage === bestMatchScore && uncommonWordCount < bestMatch.uncommonWordCount)) {
    bestMatch = { index: i, similarityPercentage, uncommonWordCount };
    bestMatchScore = similarityPercentage;
  }
}

console.log("Best match:", strings[bestMatch.index]);
console.log("Similarity Percentage:", bestMatch.similarityPercentage);
console.log("Uncommon Word Count:", bestMatch.uncommonWordCount);

highestPercentageString=strings[bestMatch.index];

const wordsCount = strings[bestMatch.index].split("xhtht")[0].split(" ").length;

//alert(wordsCount);
//alert(bestMatch.similarityPercentage+"%")

//alert(strings[bestMatch.index])

const uncommonWordPercentage = ((bestMatch.uncommonWordCount-1) / wordsCount) * 100;

//alert(uncommonWordPercentage);



// alert("ub common "+uncommonWordPercentage)
// alert("similar "+bestMatch.similarityPercentage)

if (uncommonWordPercentage<50 &&bestMatch.similarityPercentage>35){
let parts = highestPercentageString.split("xhtht");

questnTxt=parts[0];
questnAnswer =parts[1]; 
//alert(questnTxt+"qst anser "+questnAnswer)

setAnsData()
decide =1;

   askQuestionForeced()

} else{

decide=0;
askQuestionForeced()

}

}



function findinIt() {
  const base = 'https://docs.google.com/spreadsheets/d/1XdMhPVsxoem3_5QcwTZH1K3XPk8DHAYolARGhFUjuSI/gviz/tq?gid=0';
  
  
  const query = encodeURIComponent('Select B');
  const url = base + '&tq=' + query;

  fetch(url)
    .then(res => res.text())
    .then(rep => {
      const data = JSON.parse(rep.substr(47).slice(0, -2));
       const laNr= data.table.rows.length - 1;
      data.table.rows.forEach((main) => {
        main.c.forEach((ele) => {
          const text = ele.v;
          const searchTerm = "7894"; // Specify the search term here
           ivin++; 
           chatData[ivin]=text;
           if(ivin==2) {
          // alert("max number"+(laNr*1-3))
          var myswalFi = localStorage.getItem('myswalFi');
      if (myswalFi === "nono") {
       // showLoadingAlert();
       startLoading();
       }else{
            startLoading();
      }
           }
         if (ivin == (laNr*1-2)) {
       // alert("found "+ivin);
       
       // alert("booused"+text);
       
          populate ();
          }
              
        });
      });
    });
}



function checkCondition() {
  // Simulating a condition check
  setTimeout(() => {
    const conditionMet = Math.random() < 0.5; // Randomly true or false

    if (conditionMet) {
      Swal.close();
     // Swal.fire('Ready Now !', 'You aree the most welcome ! <br>Twabonetse ni  karibu na yombi.', 'success');
     setTimeout(function() {
      showSwal();
        
      }, 1000);
      hideLoadingAlert();
     listEachElements();
    } else {
      setTimeout(checkCondition, 1000); // Check the condition again after 1 second
    }
  }, 2000);
}



const timeSpan = document.getElementById("time");


function updateTime() {
      const now = new Date();
       timeString = now.toLocaleTimeString();
      timeSpan.innerText = timeString;
    }

    function updateTimedyn() {
      const currentDate = new Date();
const year = currentDate.getFullYear();
const month = String(currentDate.getMonth() + 1).padStart(2, '0');
const day = String(currentDate.getDate()).padStart(2, '0');
const hours = String(currentDate.getHours()).padStart(2, '0');
const minutes = String(currentDate.getMinutes()).padStart(2, '0');

const formattedDate = `${year}-${month}-${day} ${hours}:${minutes}`;
timeString=formattedDate;
      
    }
updateTime()
var userInput = "";
var chatbox = document.getElementById("chatbox");
 
 
function setAnsData() {
  updateTimedyn();


    qaList = [
  {
    q: questnTxt,
    a: questnAnswer
    
  }
];

}
function displayMessage(sender, message, time) { 


 

var htmlTags = /<\/?b>|<\/?u>|<\/?i>|<\/?strong>|<\/?sub>|<\/?sup>|<\/?strike>|<br>/i;

if (htmlTags.test(message)) {
 // console.log("The string contains one or more of the specified HTML tags.");
 quite=1;
} else {
  quite=0;
}



  let container = document.createElement("div");
  container.className = `container ${sender.toLowerCase()}-container`;
  
  if (sender !== 'AI Assistant') {
    container.style.backgroundColor = '#18b615'; // Apply green background color to user div
  }
  
  const imageSrc = sender === 'AI Assistant' ? 'https://github.com/E-somo/ASAP/raw/main/avatarmodel.PNG' : 'https://github.com/E-somo/ASAP/raw/main/avatarUser2.PNG';
  
  // Create the elements
  let image = document.createElement("img");
  image.src = imageSrc;
  image.alt = "Avatar";
  image.style.float = sender === 'AI Assistant' ? 'right' : 'left';
  image.style.width = "100%";
  
  let paragraph = document.createElement("p");
  let bold = document.createElement("b");
  bold.innerHTML = sender + ": "; // Use innerHTML instead of textContent
  paragraph.appendChild(bold);
  
 // let messageText = document.createElement("span"); // Create a span element instead of a text node
//  messageText.innerHTML = message.replace(/\n/g, '<br>'); // Replace newlines with <br> tags
 // paragraph.appendChild(messageText);

 let messageText = document.createTextNode("");
 paragraph.appendChild(messageText);
  
  let timeSpan = document.createElement("span");
  timeSpan.className = `time-${sender === 'AI Assistant' ? 'left' : 'right'}`;
  timeSpan.textContent = time;
  
  container.appendChild(image);
  container.appendChild(paragraph);
  container.appendChild(timeSpan);
  chatbox.appendChild(container);
  
  // Type out the message with a delay between characters
  let index = 0;
  const typingDelay = 60; // Delay in milliseconds between characters
  
  function typeMessage() {
    if (index < message.length) {
      //messageText.innerHTML += message.replace("<b>","").charAt(index); // Use innerHTML instead of textContent
        if(index<message.length) {
        messageText.textContent += message.replace(/<\/?b>|<\/?u>|<\/?i>|<\/?strong>|<\/?sup>|<\/?sub>|<\/?sup> |<\/?br>|<\/?strike>/gi, '').charAt(index);
        }

        if(index===message.length-1) { 
          indvalua++;
if(indvalua >1) {

  indvalua=0; 
  if(quite==1) {
       paragraph.innerHTML = ""; 
  }
       setTimeout(function() {
        if(quite==1) {
  let paragraph = document.createElement("p");
  let bold = document.createElement("b");
  bold.innerHTML = sender + ": "; // Use innerHTML instead of textContent
  paragraph.appendChild(bold);

  container.appendChild(paragraph);
  container.appendChild(timeSpan);
  chatbox.appendChild(container);

  let messageText = document.createElement("span"); // Create a span element instead of a text node
  messageText.innerHTML = message.replace(/\n/g, '<br>'); // Replace newlines with <br> tags
  paragraph.appendChild(messageText);
  messageText.innerHTML = messageText.innerHTML;
        }
}, 10); // Delay of 1000 milliseconds (1 second)


}
       // messageText.textContent += message.charAt(index);

        }


       else {

 /*
  if(index===message.length-2) {  
      
      let paragraph = document.createElement("p");
let bold = document.createElement("b");
bold.innerHTML = sender + ": "; // Use innerHTML instead of textContent
paragraph.appendChild(bold);

container.appendChild(paragraph);  
container.appendChild(timeSpan);
chatbox.appendChild(container);


  let messageText = document.createElement("span"); // Create a span element instead of a text node
messageText.innerHTML = message.replace(/\n/g, '<br>'); // Replace newlines with <br> tags
paragraph.appendChild(messageText);
messageText.innerHTML= messageText.innerHTML;

} 
*/
 
}

        // messageText.innerHTML=messageText.innerHTML;
        index++;
       if(index)
      setTimeout(typeMessage, typingDelay);
    }
  }
  
  typeMessage();
}










function findMatchingQA(userInput) {
  for(let i = 0; i < qaList.length; i++) {
    if(userInput.toLowerCase() === qaList[i].q.toLowerCase()) {
      return qaList[i];
    }
  }
  return null;
}

function askQuestion() {
    if(decide==0){
  userInput = document.getElementById("userinput").value.trim(); 
    } else  {
          
        let parts = highestPercentageString.split("xhtht");
        
        
        
        userInput=parts[0]; 
        clearTranscription();

    }
  if(userInput === "") {

    //alert("please ask some thing!!!!")

    pleaseask();
   
    return;
  }

  let matchingQA = findMatchingQA(userInput);
  if(matchingQA) {
    displayMessage("You", userInput, getCurrentTime());
    displayMessage("AI Assistant", matchingQA.a, getCurrentTime());

    localStorage.setItem('myValueChat',  localStorage.getItem('myValueChat')+ "<br> ------------- <br> <b> You: <i>   <span style='color: blue;'>       "+dynamicWtrite+" </span> </i>  <br>  <u>Modified:   </u> "+questnTxt+"</b>  <br> <br> <u><b> AI Assistant: </b></u>"+questnAnswer +"<br><br> "+timeString);
    document.getElementById("userinput").value = "";
    updateCharacterCount();
} else { if(count <25 ) {showAlertHelp()}else {
    displayMessage("User", userInput, getCurrentTime());
    displayMessage("AI Assistant", "I'm sorry, but I don't have an answer for that yet. I will notify you if the answer is found ASAP   Mumbabarire, none aha simfite igisubizo. Nzabamenyesha byihuse  igisubizo  nikiboneka. ", getCurrentTime());
   // promptForPhoneNumber(userInput); 

   const currentDate = new Date();

// Extract individual date and time components
const day = String(currentDate.getDate()).padStart(2, '0');
const month = String(currentDate.getMonth() + 1).padStart(2, '0'); // Months are zero-based
const year = String(currentDate.getFullYear()).slice(-2);
const hours = String(currentDate.getHours()).padStart(2, '0');
const minutes = String(currentDate.getMinutes()).padStart(2, '0');

// Format the date and time
const formattedDateTime = `${day}/${month}/${year} ${hours}:${minutes}`;
     
   var text = userInput+" asked on: "+formattedDateTime;
      var existingArray = localStorage.getItem("myArray");
      var newArray = [];

      if (existingArray) {
        newArray = JSON.parse(existingArray);
      }

      newArray.push(text);
      localStorage.setItem("myArray", JSON.stringify(newArray));
     
  

   extraHelp ="YOU:   "+document.getElementById("userinput").value.trim();
   extraHelpg = ""+document.getElementById("userinput").value.trim();
   
    showAlertHelp()
    document.getElementById("userinput").value = "";
    updateCharacterCount();
 
  } 
 
}

 
}


function askQuestionForeced() {
    if(decide==0){
  userInput = searchThis;
    } else  {
     // userInput = "Hey! Have you tried that new coffee shop in town?"
        let parts = highestPercentageString.split("xhtht");
        
        
      
        userInput=parts[0]; 

    }
  

  let matchingQA = findMatchingQA(userInput);
  if(matchingQA) {
   //displayMessage("You", userInput, getCurrentTime());
  //  displayMessage("AI Assistant", matchingQA.a, getCurrentTime());

  const currentDate = new Date();

// Extract individual date and time components
const day = String(currentDate.getDate()).padStart(2, '0');
const month = String(currentDate.getMonth() + 1).padStart(2, '0'); // Months are zero-based
const year = String(currentDate.getFullYear()).slice(-2);
const hours = String(currentDate.getHours()).padStart(2, '0');
const minutes = String(currentDate.getMinutes()).padStart(2, '0');

// Format the date and time
const formattedDateTime = `${day}/${month}/${year} ${hours}:${minutes}`;

  // alert("asked "+userInput+" answer  is "+matchingQA.a+" answered on "+getCurrentTime())
   
   var index = dynaIndex;
      var value = "<b>"+onAsk+" You Asked/Mwabajije:  </b> "+userInput+" <br>  <b><i> AI model  answer: </i></b>"+matchingQA.a+ " <br> answered on:"+formattedDateTime;
      var existingArray = localStorage.getItem("myArray");

      setStatus('ON');
      //playRingingSound();

      //ppp
      if (existingArray) {
        var newArray = JSON.parse(existingArray);
        if (index >= 0 && index < newArray.length) {
          newArray[index] = value;
          localStorage.setItem("myArray", JSON.stringify(newArray));
        }
      }

} else {
    
 
  }

 
}




function getCurrentTime() {
  const currentTime = new Date();
  const timeString = currentTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  return timeString;
}


function showSms() {
    
  var myswalFi = localStorage.getItem('myswalFi');
      if (myswalFi === "nono") {

      /*
        document.getElementById("mychats").innerHTML =  localStorage.getItem('myValueChat');
                               
        
        
        showElements2();

        */

        var sayit=localStorage.getItem('myValueChat')
      const boldText =sayit;
     

      const dialogContent = `
        <div>
          ${boldText}<br>
        </div>
      `;
      const currentYear = new Date().getFullYear();

      Swal.fire({
        html: dialogContent,
        title: 'Messages Ziheruka/Recent Messages',
        showCancelButton: true,
        showDenyButton: true,
        confirmButtonText: 'OK ',
        cancelButtonText: 'Cancel',
        denyButtonText: 'Not yet Answered',
        denyButtonColor: 'green',
       
        footer: `Powered By Tubimenye Smart Solution Ltd <br><br> &copy;2018- ${currentYear} All Rights Reserved`

      }).then((result) => {
        if (result.isConfirmed) {
          // OK button is clicked
          // Additional actions for OK button
        } else if (result.isDenied) {
         
          listElements();
      
        } else if (result.dismiss === Swal.DismissReason.cancel) {
        
        }
      });
    


       } else {

    var sayit=localStorage.getItem('myValueChat')
      const boldText =sayit;
     

      const dialogContent = `
        <div>
          ${boldText}<br>
        </div>
      `;
      const currentYear = new Date().getFullYear();

      Swal.fire({
        html: dialogContent,
        title: 'Messages Ziheruka/Recent Messages',
        showCancelButton: true,
        showDenyButton: true,
        confirmButtonText: 'OK ',
        cancelButtonText: 'Cancel',
        denyButtonText: 'Not yet Answered',
        denyButtonColor: 'green',
       
        footer: `Powered By Tubimenye Smart Solution Ltd <br><br> &copy;2018- ${currentYear} All Rights Reserved`

      }).then((result) => {
        if (result.isConfirmed) {
          // OK button is clicked
          // Additional actions for OK button
        } else if (result.isDenied) {
         
          listElements();
      
        } else if (result.dismiss === Swal.DismissReason.cancel) {
        
        }
      });
    
    }}
    

   
    function showSwal() {

      var myswalFi = localStorage.getItem('myswalFi');
      if (myswalFi === "nono") {
  //alert("Ubu Mushobora kubaza ikibazo cyose cy'amategeko y'umuhanda   Cg indi  serivise  yose itangwa na Tubimenye smart solution Ltd. Murakoze !  \n \n Now  You can ask any question about traffic laws Or  any other service provided by Tubibmenye smart solution Ltd  Thanks  \n\n Maintenant Vous pouvez poser toute question sur le code de la route or tout autre service fourni par Tubibmenye smart solution Ltd Merci ")
   /*   if(languag==0) {
        document.getElementById("infoready").innerHTML=" <b> T-Smart Solution Ltd </b> Services At Glance ";
      
      }
  document.getElementById('id01').style.display='block';

 
    document.getElementById('infoready').style.display = 'block';
    document.getElementById('button1').style.display = 'block';
    document.getElementById('button2').style.display = 'block';
    document.getElementById('button3').style.display = 'block';


  document.getElementById('aiReady').style.display = 'block';
   
   document.getElementById('adanced').style.display = 'none'; 
     document.getElementById('infailm').style.display = 'none';
     document.getElementById('buttonsender').style.display = 'none';  
     document.getElementById('aknow').style.display = 'none';  

    

    document.getElementById('button1').onclick = function() {
     //alert('Button 1 clicked!');
      languag= 1;

      document.getElementById("infoready").innerHTML="Turabafaha Mu Kinyarwanda ariko mushobora gukoresha n urundi rurimi ibitemewe ni ukuvangavanga indimi mu kibazo kimwe ! murakoze !  Twabakiriye na yombi !";
 
 
    };

    document.getElementById('button2').onclick = function() {
    //alert('Button 2 clicked!');
      languag = 2;
      document.getElementById("infoready").innerHTML= 'Ok we can  help you in English but you can use other languages,  but it is not allowed to mix languages  in the same question! Thank you! We welcome you!';

 
    };

    document.getElementById('button3').onclick = function() {
      //alert('Button 3 clicked!');
      languag =3;

      document.getElementById("infoready").innerHTML = 'Ok on peut  vous aider en Français mais vous pouvez utiliser d autres langues, mais il n est pas permis de mélanger les langues dans la même question ! Merci! Nous vous souhaitons la bienvenue !';

    };

*/


setTimeout(inforer, 2000);
       var readines='We are now Ready to help !'
          if (languag==0) {
          readines='We are now Ready to help !'
          }
          if (languag==1) {
          readines='Twiteguye kubafasha!'
          }
          if (languag==2) {
          readines='We are now Ready to help !'
          }
            if (languag==3) {
          readines='Nous sommes prêts à vous aider !'
          }
      Swal.fire({
        title:readines,
        html: '<div id="videoContainer">' +
                '<video id="videoPlayer" width="200" controls>' +
                  '<source src="https://github.com/E-somo/EnglishTextbook/raw/main/TUBIMENYE%20AI.mp4" type="video/mp4">' +
                  'Your browser does not support HTML5 video.' +
                '</video>' +
              '</div>' +
              '<p id="swalText">Muraho Muhitemo <b> ururimi </b> tubafashamo <br> Morning please choose<b> language </b> we can Assist you  you in. <br> Bjr, Veuillez choisir la <b>langue</b> dans laquelle nous pouvons vous aider. </p>' +
              '<button onclick="buttonClicked(\'Kiny\')" class="kinyButton">KINY</button>' +
              '<button onclick="buttonClicked(\'ENG\')" class="engButton">ENG</button>' +
              '<button onclick="buttonClicked(\'FR\')" class="frButton">FR</button>',
        showCancelButton: true,
        allowOutsideClick:false,
        cancelButtonText: 'Cancel',
        confirmButtonText: 'Confirm',
         footer: '<span> Ready  <b> </b> <br> To  <b> </b> To answer or search  answer for you !  </span>',
       
        didOpen: function() {
         // document.getElementById('videoPlayer').play();
          
        }
      });
    
    



       } else{
        setTimeout(inforer, 2000);
       var readines='We are now Ready to help !'
          if (languag==0) {
          readines='We are now Ready to help !'
          }
          if (languag==1) {
          readines='Twiteguye kubafasha!'
          }
          if (languag==2) {
          readines='We are now Ready to help !'
          }
            if (languag==3) {
          readines='Nous sommes prêts à vous aider !'
          }
      Swal.fire({
        title:readines,
        html: '<div id="videoContainer">' +
                '<video id="videoPlayer" width="200" controls>' +
                  '<source src="https://github.com/E-somo/EnglishTextbook/raw/main/TUBIMENYE%20AI.mp4" type="video/mp4">' +
                  'Your browser does not support HTML5 video.' +
                '</video>' +
              '</div>' +
              '<p id="swalText">Muraho Muhitemo <b> ururimi </b> tubafashamo <br> Morning please choose<b> language </b> we can Assist you  you in. <br> Bjr, Veuillez choisir la <b>langue</b> dans laquelle nous pouvons vous aider. </p>' +
              '<button onclick="buttonClicked(\'Kiny\')" class="kinyButton">KINY</button>' +
              '<button onclick="buttonClicked(\'ENG\')" class="engButton">ENG</button>' +
              '<button onclick="buttonClicked(\'FR\')" class="frButton">FR</button>',
        showCancelButton: true,
        allowOutsideClick:false,
        cancelButtonText: 'Cancel',
        confirmButtonText: 'Confirm',
         footer: '<span> Ready  <b> </b> <br> To  <b> </b> To answer or search  answer for you !  </span>',
       
        didOpen: function() {
         // document.getElementById('videoPlayer').play();
          
        }
      });
    
    
    
    } }

    function buttonClicked(lang) {
      var swalText = document.getElementById('swalText');
      if (lang === 'Kiny') {
        swalText.innerHTML = 'Turabafaha Mu Kinyarwanda ariko mushobora gukoresha n urundi rurimi ibitemewe ni ukuvangavanga indimi mu kibazo kimwe ! murakoze !  Twabakiriye na yombi !';
         languag =1;

         
         morinfo = "Munyihanganire gato !, nta gisubizo mfite none aha kuri iki kibazo!, ndakigarukaho mukanya nyuma yo kugisha inama impuguke."
         extraHelpswal = "Mumbabarire,  nta gisubizo mfite kuri  iki kibazo akakanya. Nyamuneka mwandike nimero yanyu ya terefone. Ndahita mbamenyesha byuhuse igisubizo kibonetse."

         ExrtraHelpTiT = "Ubufasha bwisumbuye";
         
      } else if (lang === 'ENG') {
        swalText.innerHTML = 'Ok we can  help you in English but you can use other languages,  but it is not allowed to mix languages  in the same question! Thank you! We welcome you!';
        languag =2; 
        morinfo = "Please bear with me!, I don't have an answer right now for this question!, I'll get back to you shortly after consulting an expert."
       
        extraHelpswal="I'm sorry, but I don't have an answer for that yet. Please enter your phone number. I will notify you ASAP once the answer is found  Ntabwo mbashije kubona igisubizo ako kanya, mwadike nimero yanyu kugi"

        ExrtraHelpTiT = "Advanced help";
      } else if (lang === 'FR') {
        swalText.innerHTML = 'Ok on peut  vous aider en Français mais vous pouvez utiliser d autres langues, mais il n est pas permis de mélanger les langues dans la même question ! Merci! Nous vous souhaitons la bienvenue !';
        languag =3;
        ExrtraHelpTiT = "Aide avancée";

        morinfo = "S'il vous plaît, soyez indulgents avec moi !, je n'ai pas de réponse pour l'instant à cette question !, je vous répondrai peu après avoir consulté un expert."

extraHelpswal="Je suis désolé, mais je n'ai pas encore de réponse. Veuillez entrer votre numéro de téléphone. Je vous informerai dès que possible une fois la réponse trouvée"
      
      }
    }
    
    function inforer() {
    
     {
      var swalText = document.getElementById('swalText');
      if (languag === 1) {
        swalText.innerHTML = 'Turabafaha Mu Kinyarwanda ariko mushobora gukoresha n urundi rurimi ibitemewe ni ukuvangavanga indimi mu kibazo kimwe ! murakoze !  Twabakiriye na yombi !';
         
         
      } else if (languag === 2) {
        swalText.innerHTML = 'Ok we can  help you in English but you can use other languages,  but it is not allowed to mix languages  in the same question! Thank you! We welcome you!';
        
      } else if (languag === 3) {
        swalText.innerHTML = 'Ok on peut  vous aider en Français mais vous pouvez utiliser d autres langues, mais il n est pas permis de mélanger les langues dans la même question ! Merci! Nous vous souhaitons la bienvenue !';
       
      }
    }
    
    
    }
    

    function showAlertHelp() {
 

if (count <25 ) {

  var imigemo = " clarify your question in at least 25 characters now you have "+count+" \n clarifiez votre question en au moins 25 caractères maintenant vous avez "+count +" sobanura ikibazo cyawe byibuze inyuguti 25 ubu ufite"+count;
  Swal.fire({
      icon: 'warning',
      title: 'Many typos or few word \  Amagambo ni make !',
      text: imigemo,
      confirmButtonText: 'Thanks'
    });
}else{
 
 var myswalFi = localStorage.getItem('myswalFi');
 var question =""
      if (myswalFi === "nono") {

     
        /*

        document.getElementById('adanced').style.display = 'block';
        document.getElementById('buttonsender').style.display = 'block';
        document.getElementById('aknow').style.display = 'block';

      question = "  \n  <br> <br> Ntabwo igisubizo  gihise kiboneka  kibonetse mwuzuze hasi nimero yanyu Tuzabamenyeshe igisubizo byihuse nikiboneka Murakoze !";
     
      var blueText = document.getElementById("blueText");
    blueText.style.color = "blue";
    document.getElementById("blueText").innerHTML = document.getElementById("userinput").value.trim();
     if (languag==0) {
      question ="\n <br> <br> No immediate answer found. Please fill in your number below. We will send you the answer. As soon as possible whenever it is  available . N.B if you don t want to send your Number write four zeros  <br> <b> Thank you!</b>";
         
      var blueText = document.getElementById("blueText");
    blueText.style.color = "blue";
    document.getElementById("blueText").innerHTML = document.getElementById("userinput").value.trim();
    }
          if (languag==1) {
            question =" \n <br> <br> Nta gisubizo cyahise kiboneka. Nyamuneka wuzuze numero yawe hepfo. Tuzohereza igisubizo. Byihuse bishoboka igihe cyose kizabonekera niba mutifuza hutanga nimero mwandikoeme zero enye <br> <b> Urakoze! </b> ";
           
            var blueText = document.getElementById("blueText");
             blueText.style.color = "blue";
             document.getElementById("blueText").innerHTML = document.getElementById("userinput").value.trim();
          }
          if (languag==2) {
          readines='We are now Ready to help !'
          question ="\n <br> <br> No immediate response found. Please enter your number below. We will send you the answer. As soon as possible as soon as it is available. N.B if you do not want to send your Number write four zeros <br> <b>Thank you!</b>";
          var blueText = document.getElementById("blueText");
           blueText.style.color = "blue";
         document.getElementById("blueText").innerHTML = document.getElementById("userinput").value.trim();
        }
            if (languag==3) {
          //readines='Nous sommes prêts à vous aider !'

          question ="\n <br> <br> Aucune réponse immédiate n'a été trouvée. Veuillez saisir votre numéro ci-dessous. Nous vous enverrons la réponse. Dès que possible dès qu'il est disponible. N.B si vous ne voulez pas envoyer votre Numéro écrivez quatre zéros <br> <b>Merci !</b>" ;
       
          var blueText = document.getElementById("blueText");
    blueText.style.color = "blue";
    document.getElementById("blueText").innerHTML = document.getElementById("userinput").value.trim();
          }


  document.getElementById('id01').style.display='block';

  document.getElementById("infail").innerHTML = question;

  document.getElementById('infailm').style.display = 'block';
                      
  document.getElementById('aiReady').style.display = 'none';
    document.getElementById('infoready').style.display = 'none';
    document.getElementById('button1').style.display = 'none';
    document.getElementById('button2').style.display = 'none';
    document.getElementById('button3').style.display = 'none';

    */




    Swal.mixin({
  input: 'text',
  inputAttributes: {
    autocapitalize: 'off'
  },
  showCancelButton: true,
  confirmButtonText: 'Submit',
  allowOutsideClick:false,
  showLoaderOnConfirm: true,
  preConfirm: (value) => {
    return new Promise((resolve) => {
      if (value.includes("000") || value.includes("@") || value.length > 9) {
    querrFoneNr = value;
    postQust();
    resolve(value);
} else {
    Swal.showValidationMessage("Must be a phone number, email, or contain three zeros (000)");
    resolve();
}
    });
  },
  allowOutsideClick: () => !Swal.isLoading()
}).fire({
  title: ExrtraHelpTiT,
 html: '<span style="color: blue;">' + extraHelp + ' <br> </span>  '+extraHelpswal,
  icon: 'info',
  allowOutsideClick:false,
}).then((result) => {
  if (result.isConfirmed) {
    
 
    if (navigator.onLine) {
      Swal.fire({
      title: 'Submitted',
      text: 'You entered: ' + result.value,
      icon: 'success'
    });
      } else {
        Swal.fire({
          icon: 'error',
          title: 'Kohereza ikibazo ntabwo bikunze nta interinete ! No internet connection.',
          timer: 5000,
          timerProgressBar: false,
          onClose: () => {
            // Additional actions to perform after the Swal alert is closed
          }
        });
      }
 
 

 
  }
});



       }else{



Swal.mixin({
  input: 'text',
  inputAttributes: {
    autocapitalize: 'off'
  },
  showCancelButton: true,
  confirmButtonText: 'Submit',
  allowOutsideClick:false,
  showLoaderOnConfirm: true,
  preConfirm: (value) => {
    return new Promise((resolve) => {
      if (value.includes("000") || value.includes("@") || value.length > 9) {
    querrFoneNr = value;
    postQust();
    resolve(value);
} else {
    Swal.showValidationMessage("Must be a phone number, email, or contain three zeros (000)");
    resolve();
}
    });
  },
  allowOutsideClick: () => !Swal.isLoading()
}).fire({
  title: ExrtraHelpTiT,
 html: '<span style="color: blue;">' + extraHelp + ' <br> </span>  '+extraHelpswal,
  icon: 'info',
  allowOutsideClick:false,
}).then((result) => {
  if (result.isConfirmed) {
    
 
    if (navigator.onLine) {
      Swal.fire({
      title: 'Submitted',
      text: 'You entered: ' + result.value,
      icon: 'success'
    });
      } else {
        Swal.fire({
          icon: 'error',
          title: 'Kohereza ikibazo ntabwo bikunze nta interinete ! No internet connection.',
          timer: 5000,
          timerProgressBar: false,
          onClose: () => {
            // Additional actions to perform after the Swal alert is closed
          }
        });
      }
 
 

 
  }
});

       }
}}
    function postQust() {
      $.ajax({
        url: "https://docs.google.com/forms/d/e/1FAIpQLScYkkl7nR4mlpYQRHl8x15drieNZJCsXjnjz6jVBhMpQH5yXA/formResponse?",
        data: {
          "entry.661853647": ""+extraHelpg,
          "entry.972603255": "QryFrom "+querrFoneNr+localStorage.getItem('myValueChat').replace(/<b>/g, "")
         .replace(/<\/b>/g, "")
         .replace(/<br>/g, "")
         .replace(/<u>/g, "")
         .replace(/<\/u>/g, "")
         .replace(/<i>/g, "")
         .replace(/<\/i>/g, "")
         .replace(/<span style='color: blue;'>/g, "")
         .replace(/<\/span>/g, "").slice(-5000)
        },
        type: "POST",
        dataType: "xml",
        success: function (d) {
        //  alert("Successful");
        },
        error: function (x, y, z) {
         // alert("Failed");
        }
      });
    }
 

    function pleaseask() {
      Swal.fire({
        icon: 'warning',
        title: 'Gira icyo umbaza ! Please ask me something!',
        showConfirmButton: true,
        timer: 3100
      });
    }



    function checkInternetConnection() {
      if (navigator.onLine) {
        Swal.fire('Internet connection is active.');
        // Additional code or Swal.fire for an active internet connection
      } else {
        Swal.fire({
          icon: 'error',
          title: 'No internet connection.',
          timer: 5000,
          timerProgressBar: true,
          onClose: () => {
            // Additional actions to perform after the Swal alert is closed
          }
        });
      }
    }  


    function listEachElements() {
  var existingArray = localStorage.getItem("myArray");

  if (existingArray) {
    var newArray = JSON.parse(existingArray);

    if (newArray.length === 0) {
      Swal.fire("Array is empty");
    } else {
      newArray.forEach(function (item, index) {
        var message = newArray.length+"Element at index " + index + ": " + item;
        //alert(message)
        
        searchThis = item;
        dynaIndex= index;
        myDeterminatForced();
          //alert(message);
        
      });
    }
  }
}


function listElements() {
      var existingArray = localStorage.getItem("myArray");
      if (existingArray) {
        var newArray = JSON.parse(existingArray);

        if (newArray.length === 0) {
          Swal.fire("Array is empty");
        } else {
          var table = document.createElement("table"); // Create a table element
          table.id = "swal-table"; // Set the ID for styling

          var thead = document.createElement("thead"); // Create the table head element
          var tbody = document.createElement("tbody"); // Create the table body element

          // Create the table headers
          var headerRow = document.createElement("tr");
          var indexTh = document.createElement("th");
          indexTh.textContent = "S/N";
          headerRow.appendChild(indexTh);
          var textTh = document.createElement("th");
          textTh.textContent = "Ibibazo n'ibisubizo";
          headerRow.appendChild(textTh);
          var buttonTh = document.createElement("th");
          buttonTh.textContent = "Hide";
          headerRow.appendChild(buttonTh);
          thead.appendChild(headerRow);

          // Create the table rows
          newArray.forEach(function (item, index) {
            var row = document.createElement("tr");
            var indexTd = document.createElement("td");
            indexTd.innerHTML = index;
            row.appendChild(indexTd);
            var textTd = document.createElement("td");
            textTd.innerHTML = item;
            row.appendChild(textTd);
            var buttonTd = document.createElement("td");
            var button = document.createElement("button");
            button.textContent = "Hide";
            button.addEventListener("click", function() {
              toggleRow(row);
            });
            buttonTd.appendChild(button);
            row.appendChild(buttonTd);
            tbody.appendChild(row);
          });

          table.appendChild(thead);
          table.appendChild(tbody);

          const currentYear2 = new Date().getFullYear();
          Swal.fire({
            title: "Verified answers ",
            html: table.outerHTML, // Insert the table HTML into Swal.fire
            showCloseButton: true,
            footer: `Powered By T- Smart Solution Ltd <br><br> &copy;2018- ${currentYear2} All Rights Reserved`,
            didOpen: () => {
              // Add event listeners after the dialog is opened
              var toggleButtons = document.querySelectorAll("#swal-table button");
              toggleButtons.forEach(function(button) {
                button.addEventListener("click", function() {
                  var row = this.parentNode.parentNode;
                  toggleRow(row);
                });
              });
            }
          });
        }
      }
    }


    function playRingingSound() {
      // Create an audio context
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();

      // Create an oscillator
      const oscillator = audioContext.createOscillator();
      oscillator.type = 'sine'; // Set oscillator type to 'sine'

      // Connect the oscillator to the audio context's destination (speakers)
      oscillator.connect(audioContext.destination);

      // Start the oscillator
      oscillator.start();

      // Stop the oscillator after a certain duration (in milliseconds)
      setTimeout(function() {
        oscillator.stop();
      }, 1000); // Stop after 2 seconds
    }
    
    setInterval(function() {
    

    var status = localStorage.getItem('status');
      if (status === null) {
        //alert('Status not set');
      } else {
        if(status=="ON") {
          playRingingSound();
          showReminderAlert();
        }
        if(status=="OFF") {
        
        }
      }


     
    },1 * 60 * 1000);

    function setStatus(status) {
      localStorage.setItem('status', status);
      console.log(`Status set to: ${status}`);
    } 


    function showReminderAlert() {
      Swal.fire({
        title: 'Reminder',
        text: 'Do you want to be reminded every 5 minutes?',
        icon: 'question',
        showCancelButton: true,
        confirmButtonText: 'Remind me',
        cancelButtonText: "Don't remind me"
      }).then(function(result) {
        if (result.value) {
          // Remind every 5 minutes
          
          Swal.fire({
                    
              icon: 'success',
              title: 'Murakoze ',
              text: 'Ok tubijeje gukomeza kubibutsa buri minota itanu kugiramgo musome ibisubizo twabazaniye ku ibibazo tutabashije guhita dusubiza ako kanya mukibitubaza ubushyize.',
            });
        } else if (result.dismiss === Swal.DismissReason.cancel) {
          // Don't remind
          console.log("Don't remind me");
          setStatus('OFF');

          Swal.fire({
              title: 'Murakoze ',
              text: 'Ok twizeye ko muraza gusoma ibisubizo byose twabazaniye, kubyo mwabajije mbere ntabwo tuzongerea kubutsa, ariko ibyo muzabaza nyuma nabyo  ibyo tutazabasha gusubiuza ako kanya,ibisubizo nibiboneka tuzabibutsa murakoze.',
              icon: 'info'
            });
          
          
        }
      });
    }





    function toggleRow(row) {
      var rowData = row.getElementsByTagName("td");
  
      // Check if the row is currently hidden
      if (rowData[1].style.display === "none") {
        // Show the row data
        for (var i = 0; i < rowData.length; i++) {
          rowData[i].style.display = "";
        }
      } else {
        // Hide the row data
        for (var i = 0; i < rowData.length; i++) {
          rowData[i].style.display = "none";
        }
      }
    }


    function isMobileDevice() {
      return /Mobi/.test(navigator.userAgent);
    }

    getScreenHeight();

    function getScreenHeight() {
      
      if (isMobileDevice()) {
        var screenHeight = window.innerHeight;
       // alert("Phone screen height: " + screenHeight + " pixels");
       
       if (screenHeight>1395) {
       
       localStorage.setItem('myswalFi', "OK");
       }else {
       localStorage.setItem('myswalFi', "nono");
       }
        
      } else {
        localStorage.setItem('myswalFi', "OK");
      }
    }


    function showLoadingAlert() {
      var overlay = document.createElement("div");
      overlay.classList.add("loading-alert-overlay");

      var alertBox = document.createElement("div");
      alertBox.classList.add("loading-alert");

      var spinner = document.createElement("div");
      spinner.classList.add("loading-spinner");

      var loadingText = document.createElement("div");
      loadingText.classList.add("loading-text");
      loadingText.textContent = "Wait...,Tegereza Ai Model gato...";

      alertBox.appendChild(spinner);
      alertBox.appendChild(loadingText);
      overlay.appendChild(alertBox);
      document.body.appendChild(overlay);

      setTimeout(function() {
        hideLoadingAlert();
      }, 300000);

     
    }

    function hideLoadingAlert() {
      var overlay = document.querySelector(".loading-alert-overlay");
      if (overlay) {
        overlay.remove();
      }
    }


    function displayElements() {
      var existingArray = localStorage.getItem("myArray");
      if (existingArray) {
        var newArray = JSON.parse(existingArray);

        if (newArray.length === 0) {
         // alert(" empty");
        } else {
          var table = document.createElement("table"); // Create a table element
          table.id = "swal-table"; // Set the ID for styling

          var thead = document.createElement("thead"); // Create the table head element
          var tbody = document.createElement("tbody"); // Create the table body element

          // Create the table headers
          var headerRow = document.createElement("tr");
          var indexTh = document.createElement("th");
          indexTh.textContent = "S/N";
          headerRow.appendChild(indexTh);
          var textTh = document.createElement("th");
          textTh.textContent = "Ibibazo n'ibisubizo";
          headerRow.appendChild(textTh);
          thead.appendChild(headerRow);

          // Create the table rows
          newArray.forEach(function (item, index) {
            var row = document.createElement("tr");
            var indexTd = document.createElement("td");
            indexTd.innerHTML = index;
            row.appendChild(indexTd);
            var textTd = document.createElement("td");
            textTd.innerHTML = item;
            row.appendChild(textTd);
            tbody.appendChild(row);
          });

          table.appendChild(thead);
          table.appendChild(tbody);

          document.getElementById("tableContainer").innerHTML = table.outerHTML;

          
         
          var currentYear = new Date().getFullYear();
          document.getElementById("currentYear").textContent = currentYear;
        }
      }
    }

    function showElements() {
      displayElements();
      document.getElementById("swal-container").classList.remove("hidden");
      document.getElementById("swal-replacer").classList.add("hidden");
    }

    function hideSwal() {
      document.getElementById("swal-container").classList.add("hidden");
    }

    function hideSwal2 (){
    document.getElementById("swal-replacer").classList.add("hidden");
  }

  function showElements2() {
      
      document.getElementById("swal-replacer").classList.remove("hidden");
    }
 


    function updateCharacterCount() {
    const textarea = document.getElementById("userinput");
    const charCount = document.getElementById("charCount");
    const text = textarea.value.replace(/\s/g, ''); // Remove whitespace characters
     count = text.length;
    charCount.textContent = "Characters: " + count;

    dynamicWtrite =textarea.value;

    if (count>199){
     
      if (infomoer === 0) {
  infomoer = 1;
  swal.fire({
    title: 'Text Limit',
    text: 'The text should not exceed 200 characters.',
    icon: 'warning',
    allowOutsideClick: false,
    onClose: function() {
      infomoer = 1;
    }
  });
}

}

  }

  function submit2() {

       const inputElement = document.getElementById('aknow');
      const inputValue = inputElement.value.trim();

      if ((inputValue.length >9 && isNaN(inputValue))||  inputValue== '0000') {
       // alert('OK contir');

        extraHelpg=  ""+document.getElementById("userinput").value.trim();
        querrFoneNr=answer;

       postQust();
      } else {
       // alert('Wrong');
      }
    


  }
  
  var iv = 0;
translateText();

function translateText() {
    // You can add your translation logic here
    // For simplicity, let's assume we are translating from English to French
    var translatedText = "As the AI assistant for T-Smart Solutions Ltd, I am here to assist you <b> with any inquiries </b> you may have about our company's offerings. ,Our notable products and services include:<br><br>- Traffic Regulation App (MATEGEKO Y’UMUHANDA ) <br><br>- Bulky SMS Sender(Send Thousands SMS at about 0.000625$/SMS ) <br><br>- Next Nexus App( Smart Planner, Find Anything, Home security and Remote Camera functionalities) <br><br>- Advanced Pre-trained Trainer (PTT) (boasts National Exams AI for automated examination and moderation services. <br> -etc... <br><br> Whether you <b> type </b> your questions or <b> speak </b> in your preferred language, I am ready to provide you with prompt and accurate information. <br> Enjoy the seamless service from T-Smart Solution Ltd!";

    if (iv === 1) {
        translatedText = "En tant qu'assistant IA pour T-Smart Solutions Ltd, je suis là pour vous aider <b> pour toute demande </b> que vous pourriez avoir sur les offres de notre entreprise. ,Nos produits et services notables incluent :<br><br> - Application de régulation du trafic (MATEGEKO Y'UMUHANDA) <br><br>- Expéditeur de SMS volumineux (envoyer des milliers de SMS à environ 0,000625 $/SMS) <br><br>- Application Nexus suivante (Planificateur intelligent, Trouver n'importe quoi, Sécurité de la maison et fonctionnalités de caméra à distance) <br><br>- Entraîneur pré-entraîné avancé (PTT) (doté de l'IA des examens nationaux pour les services d'examen et de modération automatisés. <br> -etc... <br><br> Que vous <b > tapez </b> vos questions ou <b> parlez </b> dans votre langue préférée, je suis prêt à vous fournir des informations rapides et précises. <br> Profitez du service transparent de T-Smart Solution Ltd!";
    } else if (iv === 2) {
        translatedText = "Nkumufasha ukoresha  AI wa  T-Smart Solutions Ltd, ndi hano kugirango ngufashe <b> mubibazo byose </b> ushobora kuba ufite kubyerekeye serivise zitangwa n'ikigo cyacu., Ibicuruzwa na serivisi byacu byingenzi birimo: <br> <br> - Porogaramu yigisha amategeko y umuhanda (MATEGEKO Y'UMUHANDA) <br><br>- Bulky SMS snder (App igufahasha kohereza sms ibihumbi kumafaranga agera kuri 1frw/SMS  ) <br><br>- Next Nexus App(App igufasha gupanga gahunda zitandukanye nko kuboneza urubyaro n'izindi, kubona ikintu cyose wifuza, Gucunga umutekano wiwawe, kureba kure na camera ya smart yawe  ) <br><br>- Advanced Pre-trained Trainer (PTT) (Sisiteme ikoresha ibizamini byose byatanzwe ikanabyigisha <br> -etc... <br><br> Mugihe  <b> wanditse  </b> ikibazo  cy  <b> uvuze ikibazo </b> Mururimi wifuza , Niteguye kuguha amakuru y'ingeze agufasha gusobanukirwa nuko wakoresha serivise zose . <br> Enjoy the seamless service from T-Smart Solution Ltd!";
        iv = -1;
    }
    
    iv++;
    
    // Update the content of the paragraph with the translated text
    document.getElementById("aiMessage").innerHTML = translatedText;
}
 

       
        const recognition = new webkitSpeechRecognition();
        const recordButton = document.getElementById('recordButton');
        const stopButton = document.getElementById('stopButton');
         const transcriptionTextarea = document.getElementById('userinput');

        let transcribedText = '';
        let selectedLanguageButton = null;

        recognition.lang = 'rw-RW'; // Default language is set to Kinyarwanda
        document.getElementById('stopButton').innerText = 'Stop Recording Kinyarwanda';
        recognition.continuous = true; // Keep listening until stopped
        recognition.interimResults = true; // Get interim results

        recognition.onstart = () => {
            console.log('Recording started');
            recordButton.style.display = 'none';
            stopButton.style.display = 'block';
        };

        recognition.onresult = (event) => {
            let interimTranscript = '';
            for (let i = event.resultIndex; i < event.results.length; i++) {
                if (event.results[i].isFinal) {
                    transcribedText += event.results[i][0].transcript + ' ';
                } else {
                    interimTranscript += event.results[i][0].transcript;
                }
            }
            transcriptionTextarea.value = transcribedText;
        

            const textf = transcriptionTextarea.value.replace(/\s/g, ''); // Remove whitespace characters
     count = textf.length;
// Check if the length is greater than 200 characters
if (count > 196) {
  // Truncate the text to 200 characters
  var clippedText = transcribedText.substring(0, 200);
  
  // Set the textarea value to the clipped text
  transcriptionTextarea.value = transcribedText;

  // You can also display a message or perform any other action
  console.log('Text exceeds 200 characters. we Clipped to 200 characters.');
  if (infomoer === 0) {
  infomoer = 1;
  swal.fire({
    title: 'Text Limit',
    text: 'The text should not exceed 200 characters.',
    icon: 'warning',
    allowOutsideClick: false,
    onClose: function() {
      infomoer = 1;
    }
  });
}

}
        
          };

        recognition.onend = () => {
            console.log('Recording ended');
            recordButton.style.display = 'block';
            stopButton.style.display = 'none';
            transcriptionTextarea.value = transcribedText; // Set the textarea to the final transcribed text
        
            
            const textf = transcriptionTextarea.value.replace(/\s/g, ''); // Remove whitespace characters
     count = textf.length;
// Check if the length is greater than 200 characters
if (count > 196) {
  // Truncate the text to 200 characters
  var clippedText = transcribedText.substring(0, 200);
  
  // Set the textarea value to the clipped text
  transcriptionTextarea.value = transcribedText;

  // You can also display a message or perform any other action
  console.log('Text exceeds 200 characters. we Clipped to 200 characters.');
  if (infomoer === 0) {
  infomoer = 1;
  swal.fire({
    title: 'Text Limit',
    text: 'The text should not exceed 200 characters.',
    icon: 'warning',
    allowOutsideClick: false,
    onClose: function() {
      infomoer = 1;
    }
  });
}

}
        
        
          };

        function setLanguage(language) {
            recognition.lang = language;

            if (language == "en-US") {
  document.getElementById('stopButton').innerText = 'Stop Recording English';
}

if (language == "fr-FR") {
  document.getElementById('stopButton').innerText = 'Stop Recording French';
}

if (language == "rw-RW") {
  document.getElementById('stopButton').innerText = 'Stop Recording Kinyarwanda';
}
            // Remove the highlight from the previously selected button
            if (selectedLanguageButton) {
                selectedLanguageButton.classList.remove('selected');
            }

            // Highlight the current selected button
            const buttonId = language.substring(0, 2) + 'Button'; // Assuming buttons are named with the first two letters of the language code
            selectedLanguageButton = document.getElementById(buttonId);
            selectedLanguageButton.classList.add('selected');

            console.log('Language set to ' + language);
        }

        recordButton.addEventListener('click', () => {
            if (recognition.start) {
                recognition.start();
            } else {
                console.error('Speech recognition not supported');
            }
        });

        stopButton.addEventListener('click', () => {
            recognition.stop();
        });
        
        
         function clearTranscription() {
            transcribedText = '';
            //transcriptionTextarea.value = '';
        }
     

        var datafound = "N.A";
         getLocation();
        function getLocation() {
            var ipInput = "";
            var apiUrl = 'https://ipinfo.io/' + ipInput + '/json';

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                  var currentDate = new Date().toLocaleString(); 
                    datafound =currentDate+ `
                        IP:${data.ip}
                        Location: ${data.city}, ${data.region}, ${data.country}
                        ISP: ${data.org}
                        Coordinates: ${data.loc}
                    `;
                    // Get current date and time
                   // alert('Data found: ' + datafound + "\nCurrent Date: "); // Corrected the alert function
                })
                .catch(error => {
                
               var currentDate = new Date().toLocaleString(); 
               
              datafound="N/a"+currentDate;
                  //  alert('Data found: ' + datafound) ;
                    
              });
        }
      
      
        
 
        function postQustss() {
          var textarea = document.getElementById("userinput");
          var contents = textarea.value;

          if (contents.length > 10) {
          
      $.ajax({
        url: "https://docs.google.com/forms/d/e/1FAIpQLSc6iR50_pKcLk6W3QYA2je4giDitVuz2yumJpFcrDZGbs4JvQ/formResponse?",
        data: {
          "entry.179314580": ">> "+contents,
          "entry.1719407166": "Info:  "+datafound,
        },
        type: "POST",
        dataType: "xml",
        success: function (d) {
        //  alert("Successful");
        },
        error: function (x, y, z) {
         // alert("Failed");
        }
      });
    }}
  


    
    const notification = document.getElementById('notification');
  notification.style.display = 'block';
   
  
    
  var _0x38150f=_0x4cee;function _0x10f1(){var _0x3003be=['6LpQiKn','97502pvRBUW','8aopEEc','2sFOKBP','hostname','2617224qTdXiu','4211683ILTabQ','35405Jlhkov','fire','location','onload','1947306criMzZ','4463520TzqLbW','Copyright\x20Warning','warning','aie','includes','6053976EwolNq'];_0x10f1=function(){return _0x3003be;};return _0x10f1();}(function(_0x40cacc,_0x2496f7){var _0x23cc50=_0x4cee,_0x57582e=_0x40cacc();while(!![]){try{var _0x2c5bbf=-parseInt(_0x23cc50(0x1b8))/0x1*(-parseInt(_0x23cc50(0x1ba))/0x2)+parseInt(_0x23cc50(0x1b0))/0x3+-parseInt(_0x23cc50(0x1bc))/0x4+-parseInt(_0x23cc50(0x1be))/0x5*(-parseInt(_0x23cc50(0x1b7))/0x6)+-parseInt(_0x23cc50(0x1bd))/0x7*(-parseInt(_0x23cc50(0x1b9))/0x8)+-parseInt(_0x23cc50(0x1b6))/0x9+parseInt(_0x23cc50(0x1b1))/0xa;if(_0x2c5bbf===_0x2496f7)break;else _0x57582e['push'](_0x57582e['shift']());}catch(_0x5c6409){_0x57582e['push'](_0x57582e['shift']());}}}(_0x10f1,0x73e70));function checkDomain(){var _0x33f477=_0x4cee,_0x3ff3e8=_0x33f477(0x1b4);!window[_0x33f477(0x1c0)][_0x33f477(0x1bb)][_0x33f477(0x1b5)](_0x3ff3e8)&&setInterval(function(){var _0x2bdfc0=_0x33f477;Swal[_0x2bdfc0(0x1bf)]({'icon':_0x2bdfc0(0x1b3),'title':_0x2bdfc0(0x1b2),'text':'This\x20content\x20is\x20copyrighted\x20by\x20TUBIMENYE\x20smart\x20solution.\x20Do\x20not\x20use\x20without\x20legal\x20permission.'});},0xbb8);}function _0x4cee(_0x37e9f3,_0x3ad515){var _0x10f18c=_0x10f1();return _0x4cee=function(_0x4cee46,_0x3ff917){_0x4cee46=_0x4cee46-0x1b0;var _0x1364c8=_0x10f18c[_0x4cee46];return _0x1364c8;},_0x4cee(_0x37e9f3,_0x3ad515);}window[_0x38150f(0x1c1)]=checkDomain;
   
   
   </script>
  </body>
</html>
